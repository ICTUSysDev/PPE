<div id="kt_app_content" class="app-content flex-column-fluid">
  <div id="kt_app_content_container" class="app-container container-fluid">
    <ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-4 fw-semibold mb-8">
      <li class="nav-item">
        <a class="nav-link text-active-primary pb-4 active" ng-click="app.switchTab(this, val)" data-bs-toggle="tab" value="parList" href="#kt_user_view_overview_tab">Pre-Repair Requests</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-active-primary pb-4" ng-click="app.switchTab(this, val)" data-kt-countup-tabs="true" data-bs-toggle="tab" value="icsList" href="#kt_user_view_overview_security">Pre-Repair Inspection</a>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active" id="kt_user_view_overview_tab" role="tabpanel">
        <div class="card" style="box-shadow: 0 4px 8px 0 rgb(0,0,0,0.2); padding: 10px;">
          <div class="card-header border-0 pt-6">
            <div class="card-title">
              <div class="d-flex align-items-center position-relative my-1">
                <span class="svg-icon svg-icon-1 position-absolute ms-6">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor" />
                    <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor" />
                  </svg>
                </span>
                <input type="text" data-kt-user-table-filter="search" class="form-control form-control-solid w-250px ps-14" placeholder="Search Repair" ng-model="searchRepair"/>
              </div>
            </div>
          </div>
          <div class="card-body py-4">
            <div class="table-responsive">
              <table class="table align-middle table-row-dashed fs-6 gy-5" id="kt_table_users">
                <thead>
                  <tr class="text-start text-muted fw-bold fs-7 text-uppercase gs-0">
                    <th><strong>#</strong></th>
                    <th><strong>Machine/Equipment</strong></th>
                    <th><strong>Property No.</strong></th>
                    <th><strong>Article</strong></th>
                    <th><strong>Brand</strong></th>
                    <th><strong>Status</strong></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody class="text-gray-600 fw-semibold">
                  <tr ng-repeat="r in filterData = (repairs | filter:searchRepair) | pagination: currentPage:pageSize">
                    <td><strong>{{ r.list_no }}</strong></td>
                    <td class="d-flex align-items-center">
                      <div class="d-flex flex-column">
                        <a class="text-gray-800 text-hover-primary mb-1">{{ r.ppe_data.charts_of_account.account_title }}</a>
                      </div>
                    </td>
                    <td>
                      <div class="badge badge-light fw-bold">{{ r.ppe_data.property_number }}</div>
                    </td>
                    <td>{{ r.ppe_data.article_id.name }}</td>
                    <td>{{ r.ppe_data.brand_id.name }}</td>
                    <td>
                      <div class="badge badge-{{ r.color_status }} fw-bold">{{ r.status }}</div>
                    </td>
                    <td class="text-end">
                      <div class="ms-2" data-kt-filemanger-table="copy_link">
                        <button type="button" class="btn btn-sm btn-icon btn-light btn-active-light-primary" ng-disabled="{{ r.disable_button }}" ng-click="app.repair(this, r)" data-bs-toggle="modal" data-bs-target="#kt_modal_new_target">
                          <span class="svg-icon svg-icon-5 m-0">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                              <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                              <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                            </svg>
                          </span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="6" style="text-align: center;">
                      <div class="pull-right"><ul uib-pagination direction-links="false" boundary-links="true" total-items="filterData.length" ng-model="currentPage" max-size="maxSize"></ul></div>
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
          
          <div class="modal fade" id="kt_modal_new_target" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered mw-650px">
              <div class="modal-content rounded">
                <div class="modal-header pb-0 border-0 justify-content-end">
                  <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <span class="svg-icon svg-icon-1">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                      </svg>
                    </span>
                  </div>
                </div>
                <div class="modal-body scroll-y px-10 px-lg-15 pt-0 pb-15">
                  <form id="kt_modal_new_target_form" class="form" name="formHolder.repair">
                    <div class="mb-13 text-center">
                      <h1 class="mb-3">Request for Pre-Repair Inspection</h1>
                      <div class="text-muted fw-semibold fs-5">Requested By:
                      <a href="#" class="fw-bold link-primary">{{ repair.requested_by.fullname }} | {{ repair.office.name }}</a>.</div>
                    </div>
                    <div class="row g-9 mb-8">
                      <div class="col-md-6 fv-row">
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                          <span>Property Number</span>
                        </label>
                        <input type="text" class="form-control form-control-solid" placeholder="Property Number" name="property_number" ng-model="repair.property_number" disabled/>
                      </div>
                      <div class="col-md-6 fv-row">
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                          <span>Acquisition Cost</span>
                        </label>
                        <input type="text" class="form-control form-control-solid" placeholder="Acquisition Cost" name="target_title" ng-model="repair.acquisition_cost" disabled/>
                      </div>
                    </div>
                    <div class="d-flex flex-column mb-8">
                      <label class="fs-6 fw-semibold mb-2">Description</label>
                      <textarea class="form-control form-control-solid" rows="3" name="target_details" placeholder="Description" ng-model="repair.description" disabled></textarea>
                    </div>
                    <div class="row g-9 mb-8">
                      <div class="col-md-6 fv-row">
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                          <span>Brand</span>
                        </label>
                        <input type="text" class="form-control form-control-solid" placeholder="Brand" name="target_title" ng-model="repair.brand.name" disabled/>
                      </div>
                      <div class="col-md-6 fv-row">
                        <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
                          <span>Article</span>
                        </label>
                        <input type="text" class="form-control form-control-solid" placeholder="Article" name="target_title" ng-model="repair.article.name" disabled/>
                      </div>
                    </div>
                    <div class="d-flex flex-column mb-8">
                      <label class="fs-6 fw-semibold mb-2">Remarks</label>
                      <textarea class="form-control form-control-solid" rows="3" name="target_details" placeholder="Remarks" ng-model="repair.remarks" disabled></textarea>
                    </div>
                    <div class="text-center">
                      <button type="reset" id="kt_modal_new_target_cancel" class="btn btn-light me-3" data-bs-dismiss="modal">Cancel</button>
                      <button type="submit" id="kt_modal_new_target_submit" class="btn btn-primary" ng-click="app.approvedRequest(this, repair.id)">
                        <span class="indicator-label">Accept</span>
                        <span class="indicator-progress">Please wait...
                        <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="kt_user_view_overview_security" role="tabpanel">
        <div class="card" style="box-shadow: 0 4px 8px 0 rgb(0,0,0,0.2); padding: 10px;">
          <div class="card-header border-0 pt-6">
            <div class="card-title">
              <div class="d-flex align-items-center position-relative my-1">
                <span class="svg-icon svg-icon-1 position-absolute ms-6">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor" />
                    <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor" />
                  </svg>
                </span>
                <input type="text" data-kt-user-table-filter="search" class="form-control form-control-solid w-250px ps-14" placeholder="Search Repair" ng-model="searchRepairOffice"/>
              </div>
            </div>
          </div>
          <div class="card-body py-4">
            <div class="table-responsive">
              <table class="table align-middle table-row-dashed fs-6 gy-5" id="kt_table_users">
                <thead>
                  <tr class="text-start text-muted fw-bold fs-7 text-uppercase gs-0">
                    <th><strong>#</strong></th>
                    <th><strong>Details</strong></th>
                    <th><strong>Brand</strong></th>
                    <th><strong>Article</strong></th>
                    <th><strong>Requested By:</strong></th>
                    <th><strong>Status</strong></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody class="text-gray-600 fw-semibold">
                  <tr ng-repeat="r in filterData = (repairOffices | filter:searchRepairOffice) | pagination: currentPage:pageSize">
                    <td><strong>{{ r.list_no }}</strong></td>
                    <td class="d-flex align-items-center">
                      <div class="d-flex flex-column">
                        <a class="text-gray-800 text-hover-primary mb-1">{{ r.charts_of_account.account_title }}</a>
                        <span>{{ r.machinery_equipment.property_number }}</span>
                      </div>
                    </td>
                    <td>
                      <div class="badge badge-light fw-bold">{{ r.brand.name }}</div>
                    </td>
                    <td>{{ r.article.name }}</td>
                    <td>
                      <div class="badge badge-light-success fw-bold">{{ r.requested_by.fullname }}</div>
                    </td>
                    <td>
                      <div class="badge badge-light-{{ r.pri_status_color }} fw-bold">{{ r.pri_status }}</div>
                    </td>
                    <td class="text-end" style="position: relative;">
                      <div class="btn-group dropstart">
                        <button type="button" class="btn btn-sm btn-icon btn-light btn-active-light-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                          <span class="svg-icon svg-icon-5 m-0">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect x="10" y="10" width="4" height="4" rx="2" fill="currentColor" />
                              <rect x="17" y="10" width="4" height="4" rx="2" fill="currentColor" />
                              <rect x="3" y="10" width="4" height="4" rx="2" fill="currentColor" />
                            </svg>
                          </span>
                        </button>
                        <div class="dropdown-menu menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-150px py-4">
                          <div class="menu-item px-3">
                            <a href="#" class="menu-link px-3" data-kt-filemanager-table="rename" ng-click="app.repairOffice(this, r)">View</a>
                          </div>
                          <div class="menu-item px-3">
                            <a href="#" class="menu-link px-3" data-kt-filemanager-table="rename" ng-click="app.releaseEquipment(this, r)">Release</a>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="6" style="text-align: center;">
                      <div class="pull-right"><ul uib-pagination direction-links="false" boundary-links="true" total-items="filterData.length" ng-model="currentPage" max-size="maxSize"></ul></div>
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
